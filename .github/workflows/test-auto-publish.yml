name: Test Auto Publish

on:
  workflow_dispatch:
    inputs:
      test_message:
        description: 'æµ‹è¯•æ¶ˆæ¯'
        required: false
        type: string
        default: 'Hello from Auto Publish Test'

jobs:
  test-job:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Show Test Message
        run: |
          echo "ğŸ‰ æµ‹è¯•å·¥ä½œæµè¿è¡ŒæˆåŠŸï¼"
          echo "è¾“å…¥çš„æ¶ˆæ¯: ${{ github.event.inputs.test_message }}"
          echo ""
          echo "âœ… è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿå·²å®‰è£…"
          echo "ğŸ“ å·¥ä½œæµæ–‡ä»¶: auto-publish-wechat.yml"
          echo "ğŸ“ æ–‡ç« æ–‡ä»¶: content/posts/new-energy-vehicle-trends-20260202-222400*"
          echo "ğŸ•’ ä¸‹æ¬¡è‡ªåŠ¨è¿è¡Œ: æ˜å¤© 08:00 (åŒ—äº¬æ—¶é—´)"
      
      - name: List Generated Files
        run: |
          echo "ğŸ“‹ ç”Ÿæˆçš„æ–‡ä»¶åˆ—è¡¨:"
          find content/posts -name "*.md" -type f | sort
          echo ""
          echo "æ€»æ–‡ç« æ•°: $(find content/posts -name "*.md" -type f | wc -l)"
      
      - name: Create Test Report
        run: |
          echo "# è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿæµ‹è¯•æŠ¥å‘Š" > test-report.md
          echo "æµ‹è¯•æ—¶é—´: $(date)" >> test-report.md
          echo "æµ‹è¯•çŠ¶æ€: âœ… æˆåŠŸ" >> test-report.md
          echo "" >> test-report.md
          echo "## å·²å®‰è£…çš„ç³»ç»Ÿç»„ä»¶" >> test-report.md
          echo "1. ğŸš— æ–°èƒ½æºæ±½è½¦è¡Œä¸šåˆ†ææ–‡ç« " >> test-report.md
          echo "2. ğŸ“± å¾®ä¿¡å…¬ä¼—å·æ ¼å¼è½¬æ¢å·¥å…·" >> test-report.md
          echo "3. âš¡ è‡ªåŠ¨å‘å¸ƒå·¥ä½œæµ" >> test-report.md
          echo "4. ğŸ¨ å¾®ä¿¡å…¬ä¼—å·æ’ç‰ˆè§„åˆ™" >> test-report.md
          echo "" >> test-report.md
          echo "## ä½¿ç”¨è¯´æ˜" >> test-report.md
          echo "1. è®¿é—® https://github.com/Gsaecy/gsaecy.github.io/actions" >> test-report.md
          echo "2. æ‰¾åˆ° 'Auto Publish WeChat Articles' å·¥ä½œæµ" >> test-report.md
          echo "3. ç‚¹å‡» 'Run workflow'" >> test-report.md
          echo "4. é€‰æ‹©è¡Œä¸šï¼Œå¼€å§‹è‡ªåŠ¨å‘å¸ƒ" >> test-report.md
          
          cat test-report.md